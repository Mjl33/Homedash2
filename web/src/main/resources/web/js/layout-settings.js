function deleteLayout(t){var a=t.attr("data-id");confirm("Delete Layout ?")&&$.getJSON("/layout/"+a+"/delete",function(){alert("Layout deleted"),t.remove()})}function renameLayout(t){var a=t.attr("data-id"),e=prompt("New name");e!=void 0&&$.trim(e).length>0&&$.post("/layout/"+a+"/rename",{name:e},function(){t.find(".name").html(e)},"json")}function generateLayout(){$(".layout-display").each(function(){for(var t=0;$(this).attr("data-max")>t;t++)$(this).append('<div class="grid item"></div>');displayLayoutInfo($(this).parents(".layout")),resizeItems($(this))})}function displayLayoutInfo(t){var a=t.find(".grid.item").length;t.find(".grid-width").html(a),t.find(".screen-width").html(a*102+"px")}function removeItem(t){t.find(".grid.item").length>1&&(t.find(".grid.item:last-of-type").remove(),validateAndSave(t),resizeItems(t),displayLayoutInfo(t))}function addItem(t){t.find(".grid.item:last-of-type").after('<div class="grid item"></div>'),validateAndSave(t),resizeItems(t),displayLayoutInfo(t)}function resizeItems(t){var a=t.find(".grid.item"),e=100/a.length;a.css("width",e-1+"%"),a.css("height",$(a[0]).width())}function validateAndSave(t){var a=t.find(".grid.item");console.log(a);var e=!0;$(".layout").each(function(){var i=$(this);i.attr("data-id")!=t.attr("data-id")&&i.find(".grid.item").length==a.length&&(e=!1)}),e?(t.removeClass("invalid"),$.get("/layout/"+t.attr("data-id")+"/set-size/"+a.length)):t.addClass("invalid")}function addLayout(){var t=prompt("Layout name");t!=void 0&&$.trim("name")&&$.post("/layout-settings",{name:t},function(){window.location.reload(!0)})}$(document).ready(function(){generateLayout(),$(document).on("click",".layout .remove",function(){var t=$(this).parents(".layout");removeItem(t)}),$(document).on("click",".layout .add",function(){var t=$(this).parents(".layout");addItem(t)}),$(document).on("click",".layout .rename",function(){var t=$(this).parents(".layout");renameLayout(t)}),$(document).on("click",".layout .delete",function(){var t=$(this).parents(".layout");deleteLayout(t)}),$("#add-layout").click(addLayout)})