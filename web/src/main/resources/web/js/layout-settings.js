function generateLayout(){$(".layout-display").each(function(){for(var t=0;$(this).attr("data-max")>t;t++)$(this).append('<div class="grid item"></div>');resizeItems($(this))})}function removeItem(t){t.find(".grid.item").length>1&&(t.find(".grid.item:last-of-type").remove(),validateAndSave(t),resizeItems(t))}function addItem(t){t.find(".grid.item:last-of-type").after('<div class="grid item"></div>'),validateAndSave(t),resizeItems(t)}function resizeItems(t){var a=t.find(".grid.item"),e=100/a.length;a.css("width",e-1+"%"),a.css("height",$(a[0]).width())}function validateAndSave(t){var a=t.find(".grid.item");console.log(a);var e=!0;$(".layout").each(function(){var i=$(this);i.attr("data-id")!=t.attr("data-id")&&i.find(".grid.item").length==a.length&&(e=!1)}),e?(t.removeClass("invalid"),$.get("/layout/"+t.attr("data-id")+"/set-size/"+a.length)):t.addClass("invalid")}function addLayout(){var t=prompt("Layout name");t!=void 0&&$.trim("name")&&$.post("/layout-settings",{name:t},function(){window.location.reload(!0)})}$(document).ready(function(){generateLayout(),$(document).on("click",".layout .remove",function(){var t=$(this).parents(".layout");removeItem(t)}),$(document).on("click",".layout .add",function(){var t=$(this).parents(".layout");addItem(t)}),$("#add-layout").click(addLayout)})